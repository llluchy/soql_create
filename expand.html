<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOQL Creator - 数据库管理工具</title>
    <link rel="stylesheet" href="expand.css">
</head>
<body>
    <div class="layout-container">
        <!-- 顶部导航栏 -->
        <header class="top-navbar">
            <div class="navbar-left">
                <div class="logo">SOQL Creator</div>
                <div class="connection-info">
                    <span class="env-badge production" id="envBadge">Production</span>
                    <select class="org-select" id="orgSelect">
                        <option value="">请选择环境</option>
                    </select>
                </div>
            </div>
            <div class="navbar-center">
                <div class="query-tabs">
                    <div class="tab active" data-query-id="1">Query 1</div>
                    <div class="tab" data-query-id="2">Query 2</div>
                    <button class="new-tab-btn" title="新建查询" id="newTabBtn">+</button>
                </div>
            </div>
            <div class="navbar-right">
                <button class="btn-icon" title="执行查询" id="executeBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5,3 19,12 5,21"></polygon>
                    </svg>
                </button>
                <button class="btn-icon" title="保存查询" id="saveBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17,21 17,13 7,13 7,21"></polyline>
                        <polyline points="7,3 7,8 15,8"></polyline>
                    </svg>
                </button>
                <button class="btn-icon" title="导出结果" id="exportBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7,10 12,15 17,10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
                <button class="btn-icon" title="设置" id="settingsBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- 主内容区域 -->
        <div class="content-area">
            <!-- 左侧边栏 -->
            <aside class="sidebar">
                <!-- 对象列表区域 -->
                <div class="object-panel">
                    <div class="panel-header">
                        <h3>对象</h3>
                        <input type="text" class="search-input" placeholder="搜索对象..." id="objectSearch">
                        <button class="btn-icon" title="刷新对象列表" id="refreshObjects">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                        </button>
                    </div>
                    <div class="object-filters">
                        <button class="filter-btn active" data-filter="all">全部</button>
                        <button class="filter-btn" data-filter="business">业务对象</button>
                        <button class="filter-btn" data-filter="metadata">元数据对象</button>
                        <button class="filter-btn" data-filter="system">系统对象</button>
                    </div>
                    <div class="object-list" id="objectList">
                        <div class="object-item" data-object="Account" data-type="business">
                            <span class="object-name">Account</span>
                            <span class="object-label">客户</span>
                        </div>
                        <div class="object-item" data-object="Contact" data-type="business">
                            <span class="object-name">Contact</span>
                            <span class="object-label">联系人</span>
                        </div>
                        <div class="object-item" data-object="Opportunity" data-type="business">
                            <span class="object-name">Opportunity</span>
                            <span class="object-label">商机</span>
                        </div>
                        <div class="object-item" data-object="Case" data-type="business">
                            <span class="object-name">Case</span>
                            <span class="object-label">案例</span>
                        </div>
                        <div class="object-item" data-object="Lead" data-type="business">
                            <span class="object-name">Lead</span>
                            <span class="object-label">潜在客户</span>
                        </div>
                    </div>
                </div>
                
                <!-- 字段列表区域 -->
                <div class="field-panel">
                    <div class="panel-header">
                        <h3>字段</h3>
                        <input type="text" class="search-input" placeholder="搜索字段..." id="fieldSearch">
                    </div>
                    <div class="field-controls">
                        <button class="btn-icon" title="全选字段" id="selectAllFields">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,11 12,14 22,4"></polyline>
                                <path d="M21,12v7a2,2 0 0,1 -2,2H5a2,2 0 0,1 -2,-2V5a2,2 0 0,1 2,-2h11"></path>
                            </svg>
                        </button>
                        <button class="btn-icon" title="全不选字段" id="deselectAllFields">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            </svg>
                        </button>
                        <button class="btn-icon" title="选择常用字段" id="selectCommonFields">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"></polygon>
                            </svg>
                        </button>
                    </div>
                    <div class="field-list" id="fieldList">
                        <div class="field-group">
                            <div class="group-header">
                                <span class="group-title">标准字段</span>
                            </div>
                            <div class="field-items">
                                <div class="field-item" data-field="Id">
                                    <input type="checkbox" class="field-checkbox" checked>
                                    <span class="field-name">Id</span>
                                    <span class="field-type">ID</span>
                                </div>
                                <div class="field-item" data-field="Name">
                                    <input type="checkbox" class="field-checkbox" checked>
                                    <span class="field-name">Name</span>
                                    <span class="field-type">String</span>
                                </div>
                                <div class="field-item" data-field="CreatedDate">
                                    <input type="checkbox" class="field-checkbox">
                                    <span class="field-name">CreatedDate</span>
                                    <span class="field-type">DateTime</span>
                                </div>
                                <div class="field-item" data-field="LastModifiedDate">
                                    <input type="checkbox" class="field-checkbox">
                                    <span class="field-name">LastModifiedDate</span>
                                    <span class="field-type">DateTime</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="field-footer">
                        <button class="generate-soql-btn" id="generateSOQLBtn">生成 SOQL</button>
                    </div>
                </div>
            </aside>

            <!-- 主内容区域 -->
            <main class="main-content">
                <!-- SOQL 显示区域 (1/4 高度) -->
                <section class="query-display-section">
                    <div class="section-header">
                        <h3>生成的 SOQL</h3>
                        <div class="section-controls">
                            <button class="btn-sm" id="copyQueryBtn">复制</button>
                            <button class="btn-sm" id="formatQueryBtn">格式化</button>
                            <button class="btn-sm" id="clearQueryBtn">清空</button>
                        </div>
                    </div>
                    <div class="query-display">
                        <pre class="query-code" id="generatedQuery">SELECT Id, Name FROM Account LIMIT 10</pre>
                    </div>
                </section>
                
                <!-- 查询结果区域 (3/4 高度) -->
                <section class="result-section">
                    <div class="section-header">
                        <h3>查询结果</h3>
                        <div class="section-controls">
                            <span class="result-info">
                                <span id="resultCount">0</span> 条记录
                                <span id="executionTime">执行时间: 0ms</span>
                            </span>
                            <button class="btn-sm" id="exportResultBtn">导出</button>
                            <button class="btn-sm" id="refreshResultBtn">刷新</button>
                        </div>
                    </div>
                    <div class="result-viewer">
                        <div class="result-table-container">
                            <table class="result-table" id="resultTable">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th>Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 动态生成的结果行 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- 状态栏 -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-item" id="connectionStatus">已连接</span>
                <span class="status-item" id="selectedObject">未选择对象</span>
                <span class="status-item" id="selectedFields">0 个字段</span>
            </div>
            <div class="status-right">
                <span class="status-item" id="cursorPosition">行: 1, 列: 1</span>
                <span class="status-item" id="encoding">UTF-8</span>
            </div>
        </footer>
    </div>

    <!-- 引入脚本 -->
    <script src="constants.js"></script>
    <script src="UserConfig.js"></script>
    <script src="SalesforceConnection.js"></script>
    <script src="expand.js"></script>
</body>
</html>